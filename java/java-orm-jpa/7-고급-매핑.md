## 7. 고급 매핑

### 상속관계 매핑
- 관계형 데이터베이스에 상속관계라는 건 존재하지 않음
- 객체의 상속관계에 빗댈 수 있는 가장 비슷한 개념이 슈퍼타입-서브타입 관계
- **상속관계 매핑**: `객체`의 상속 구조와 `RDB`의 슈퍼타입-서브타입 관계를 매핑함
- 슈퍼타입-서브타입 논리 모델을 실제 물리 모델로 구현하는 방법은 세 가지가 있음
    1. 조인 전략
        - 각각 테이블로 변환
    2. 단일 테이블 전략
        - 통합 테이블로 변환
    3. ~~구현 클래스마다 테이블 전략~~
        - 서브타입 테이블로 변환
- 주요 애노테이션은 다음과 같음
    - `@Inheritance(strategy=InheritanceType.XXX)`
        - `InheritanceType.JOINED` : 조인 전략
        - `InheritanceType.SINGLE_TABLE` : 싱글 테이블 전략
        - `InheritanceType.TABLE_PER_CLASS` : 구현 클래스마다 테이블 전략
    - `@DiscriminatorColumn(name="DTYPE")`
    - `@DiscriminatorValue("XXX")`
- 예제는 다음과 같음
    - ![Alt text](image.png)
    - 객체 입장에서는 변할 게 없는 구조
        - `parent:Item`, `child:{Album, Movie, Book}`

### 조인 전략
> 각각 테이블로 변환
- ![Alt text](image-1.png)
- 아이템 테이블에 구분하는 속성 `DTYPE`을 둠
- `ITEM_ID(PK, FK)`에 맞추어 `JOIN`하여 가져옴
- 장점
- 단점

### 단일 테이블 전략
> 논리 모델을 한 테이블로 변환
- **기본 전략**
- ![Alt text](image-2.png)
- 한 테이블에 모든 field들 둠, 사용하지 않는 속성은 null
- 동일하게 아이템 테이블에 구분하는 필드 `DTYPE`을 둠
- 장점
    - 단순하고, 성능이 좋음
- 단점

### 구현 클래스마다 테이블 전략
- 서브타입 테이블로 변환




---  
## 다음 글 

### 8. [프록시와 연관관계 관리](8-프록시와-연관관계-관리.md)
